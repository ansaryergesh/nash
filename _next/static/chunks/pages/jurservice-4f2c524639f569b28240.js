(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{4714:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(5893),n=s(6156),o=s(9669),i=s.n(o),r=s(7294),c=s(1131),l=s(741),p=s(6808),d=s.n(p),u=s(5611),m=s(7513),f=s(3899),h=s(1163),g=s(2089),j=s(1824),x=s(6737),v=s.n(x),N=s(6072),y=s(5614);function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w=function(e){var t=e.setLoading,s=(0,u.e1)().addToast,o=(0,r.useState)({email:"",phone:"",fio:"",password:"",type:"\u0424\u0438\u0437 \u043b\u0438\u0446\u043e"}),p=o[0],g=o[1],x=(0,r.useState)({email:"",phone:"",fio:"",password:""}),b=(x[0],x[1],(0,r.useState)("")),w=b[0],_=b[1],S=(0,r.useState)(""),k=S[0],E=S[1],Z=(0,r.useState)({value:"",type:!1,loading:!1}),P=Z[0],D=Z[1],C=(0,r.useState)(!1),z=C[0],L=C[1];(0,r.useEffect)((function(){var e=k?k.replace(/ /g,""):"";12===e.length?(D(O(O({},P),{},{type:!0,value:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",loading:!0})),i().get("https://api.money-men.kz/api/testKompra?bin=".concat(e),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e),0===e.data.content.length?setTimeout((function(){D({value:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0411\u0418\u041d",type:!1,loading:!1})}),1e3):D({value:e.data.content[0].name,type:!0,loading:!1})})).catch((function(e){console.log(e),e.response&&console.log(e.response.status),D({value:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0411\u0418\u041d",type:!1,loading:!1})}))):D({value:"",type:!1,loading:!1})}),[k]);var T=(0,r.useState)(""),K=T[0],X=T[1],A=function(e){(0,j.p)(e.iin)?(t(!0),g(e),i().get("".concat("https://crediter.kz/api","/identification"),{params:{fio:e.fio,phone:(0,l.Kp)(e.phone),email:e.email,password:e.password,type:e.type,source:"nashcompany.kz"}}).then((function(e){t(!1),console.log(e),e.data.success&&L(!0),e.data.success||s(e.data.message,{appearance:"error",autoDismiss:!0})})).catch((function(e){t(!1),e.response&&s(e.response.status,{appearance:"error",autoDismiss:!0})}))):v()("Oops!","\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0443\u0441\u043b\u0443\u0433\u0430 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438\u0446\u0430\u043c \u0434\u043e\u0441\u0442\u0438\u0433\u0448\u0438\u0435 18 \u043b\u0435\u0442.","info")};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"form_register",children:[(0,a.jsx)(m.J9,{initialValues:{email:"",bin:"",position:"",phone:"",fio:"",password:"",type:"\u0424\u0438\u0437 \u043b\u0438\u0446\u043e",iin:""},onSubmit:function(e){A(e)},children:function(e){var t,s=e.errors,o=e.touched;return(0,a.jsxs)(m.l0,{children:[(0,a.jsx)(m.gN,{name:"bin",className:"form-control",placeholder:"\u0411\u0418\u041d",type:"tel",onChange:function(e){return function(e){var t=e.target.value;t&&t.replace(/ /g,""),E(e.target.value)}(e)},value:k,component:y.Z}),(0,a.jsx)("input",{type:"text",className:!1===P.type&&P.value&&"disabled_error",value:P.value,disabled:!0,name:"organization",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"}),(0,a.jsx)(m.gN,{type:"text",name:"position",validate:f.C1,placeholder:"\u0417\u0430\u043d\u0438\u043c\u0430\u0435\u043c\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",autocomplete:"off"}),s.position&&o.position?(0,a.jsx)("p",{className:"text-danger",children:s.position}):(0,a.jsx)("p",{className:"text-danger"}),(0,a.jsx)(m.gN,{type:"text",name:"fio",validate:f.X4,placeholder:"\u0424\u0418\u041e",autocomplete:"off"}),s.fio&&o.fio?(0,a.jsx)("p",{className:"text-danger",children:s.fio}):(0,a.jsx)("p",{className:"text-danger"}),(0,a.jsx)(m.gN,{name:"phone",className:"form-control",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u043e\u043c\u0435\u0440",type:"tel",validate:f.k8,component:N.Z}),s.phone&&o.phone?(0,a.jsx)("p",{className:"text-danger",children:s.phone}):(0,a.jsx)("p",{className:"text-danger"}),(0,a.jsx)(m.gN,{name:"iin",className:"form-control",placeholder:"\u0418\u0418\u041d",type:"tel",validate:f.CD,component:y.Z}),s.iin&&o.iin?(0,a.jsx)("p",{className:"text-danger",children:s.iin}):(0,a.jsx)("p",{className:"text-danger"}),(0,a.jsx)(m.gN,{type:"text",name:"email",validate:f.s$,placeholder:"Email",autocomplete:"off"}),s.email&&o.email?(0,a.jsx)("p",{className:"text-danger",children:s.email}):(0,a.jsx)("p",{className:"text-danger"}),(0,a.jsx)("input",(t={className:"singlebtn",type:"submit"},(0,n.Z)(t,"className","button"),(0,n.Z)(t,"value","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),t))]})}}),(0,a.jsx)(c.Z,{isModalOpen:z,closeModal:function(){L(!1)},code:K,setCode:X,onFirstStep:function(e){t(!0),i().get("".concat("https://crediter.kz/api","/stepOne"),{params:{fio:p.fio,phone:(0,l.Kp)(p.phone),email:p.email,password:p.password,type:p.type,code:e,source:d().get("utm_source")+"_1"||0}}).then((function(e){t(!1),console.log(e),e.data.success&&(d().set("token",e.data.token),d().set("lead_id",e.data.id),d().set("step",2),h.default.push("/jurservice?step=2")),e.data.success||(_(e.data.message),s(finalErr,{appearance:"error",autoDismiss:!0}))}))},error:w,getIdentification:A})]})})},_=function(e){var t=e.setLoading;return(0,a.jsx)(u.VW,{children:(0,a.jsx)(w,{setLoading:t})})},S=s(208),k=s(9956),E=s(9008),Z=s(2465),P=function(){var e=(0,h.useRouter)(),t=e.query.step,s=(0,r.useState)(!1),n=s[0],o=s[1],i=(0,r.useState)(""),c=i[0],l=i[1];return(0,r.useEffect)((function(){l(d().get("step"))}),[d().get("step")]),(0,r.useEffect)((function(){d().get("step")||e.push("/jurservice"),"2"===d().get("step")&&e.push("/jurservice?step=2"),"3"===d().get("step")&&e.push("/jurservice?step=3")}),[]),(0,a.jsxs)("div",{className:"getservice",children:[n&&(0,a.jsx)(g.Z,{}),(0,a.jsx)(E.default,{children:(0,a.jsx)("title",{children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0443"})}),(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)(k.Z,{}),(0,a.jsx)("div",{className:"bg"})]}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"form--header",children:[(0,a.jsx)("h3",{children:"\u0423\u0441\u043b\u0443\u0433\u0438 \u044e\u0440 \u043b\u0438\u0446\u0430\u043c"}),(0,a.jsxs)("h2",{children:["\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(0,a.jsx)("br",{}),"\u0443\u0441\u043b\u0443\u0433\u0443:"]})]}),(0,a.jsxs)("div",{className:"form_service ",children:[(0,a.jsx)("div",{className:"form_header",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{className:void 0===c?"active":"",children:"1 \u0428\u0430\u0433"}),(0,a.jsx)("li",{className:"2"===c&&"2"===t&&"active",children:"2 \u0428\u0430\u0433"}),(0,a.jsx)("li",{className:"3"===c&&"3"===t&&"active",children:"3 \u0428\u0430\u0433"})]})}),void 0===d().get("step")&&(0,a.jsx)(_,{setLoading:o}),"2"===d().get("step")&&"2"===t&&(0,a.jsx)(S.Z,{}),"3"===d().get("step")&&"3"===t&&(0,a.jsx)(Z.Z,{})]})]})]})}},5804:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jurservice",function(){return s(4714)}])}},function(e){e.O(0,[774,178,614,573,796],(function(){return t=5804,e(e.s=t);var t}));var t=e.O();_N_E=t}]);