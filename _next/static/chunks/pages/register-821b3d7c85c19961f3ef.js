(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{7798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(5893),n=a(6156),o=a(9956),i=a(9008),r=a(1163),c=a(6808),l=a.n(c),p=a(7294),u=a(2089),d=(a(4617),a(9291)),f=a(4494),m=a(741),h=a(9669),g=a.n(h),x=a(1131),j=a(5611),v=a(7513),N=a(3899),y=a(1824),_=a(6737),k=a.n(_),w=a(6072),b=a(5614);var O=function(e){var t=e.setLoading,a=(0,j.e1)().addToast,o=(0,p.useState)({email:"",phone:"",fio:"",password:"",type:"\u0424\u0438\u0437 \u043b\u0438\u0446\u043e"}),i=o[0],c=o[1],u=(0,p.useState)({email:"",phone:"",fio:"",password:""}),d=(u[0],u[1],(0,p.useState)("")),f=d[0],h=d[1],_=(0,p.useState)(!1),O=_[0],S=_[1],E=(0,p.useState)(""),C=E[0],z=E[1],U=function(e){console.log(e),console.log("other"),(0,y.p)(e.iin)?(t(!0),c(e),g().get("".concat("https://crediter.kz/api","/identification"),{params:{fio:e.fio,phone:(0,m.Kp)(e.phone),email:e.email,password:e.password,type:e.type,source:"nashcompany.kz",iin:e.iin}}).then((function(e){t(!1),e.data.success&&S(!0),e.data.success||a(e.data.message,{appearance:"error",autoDismiss:!0})})).catch((function(e){t(!1),e.response&&a(e.response.status,{appearance:"error",autoDismiss:!0})}))):k()("Oops!","\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0443\u0441\u043b\u0443\u0433\u0430 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438\u0446\u0430\u043c \u0434\u043e\u0441\u0442\u0438\u0433\u0448\u0438\u0435 18 \u043b\u0435\u0442.","info")};return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"form_register",children:[(0,s.jsx)(v.J9,{initialValues:{email:"",phone:"",fio:"",password:"",type:"\u0424\u0438\u0437 \u043b\u0438\u0446\u043e",iin:""},onSubmit:function(e){U(e)},children:function(e){var t,a=e.errors,o=e.touched;return(0,s.jsxs)(v.l0,{children:[(0,s.jsx)(v.gN,{type:"text",name:"fio",className:"capitalize",validate:N.X4,placeholder:"\u0424\u0418\u041e",autocomplete:"off"})," ",a.fio&&o.fio?(0,s.jsx)("p",{className:"text-danger",children:a.fio}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{name:"phone",className:"form-control",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u043e\u043c\u0435\u0440",type:"tel",validate:N.k8,component:w.Z}),a.phone&&o.phone?(0,s.jsx)("p",{className:"text-danger",children:a.phone}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{name:"iin",className:"form-control",placeholder:"\u0418\u0418\u041d",type:"tel",validate:N.CD,component:b.Z}),a.iin&&o.iin?(0,s.jsx)("p",{className:"text-danger",children:a.iin}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{type:"text",name:"email",validate:N.s$,placeholder:"Email",autocomplete:"off"})," ",a.email&&o.email?(0,s.jsx)("p",{className:"text-danger",children:a.email}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{type:"password",name:"password",validate:N.l1,placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",autocomplete:"off"})," ",a.password&&o.password?(0,s.jsx)("p",{className:"text-danger",children:a.password}):(0,s.jsx)("p",{className:""}),(0,s.jsxs)("span",{className:"form_extrabtns",children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? ",(0,s.jsx)("a",{onClick:function(){r.default.push("/login")},children:"\u0412\u043e\u0438\u0434\u0438\u0442\u0435"})]}),(0,s.jsx)("div",{className:"firststep_banner",children:(0,s.jsx)("div",{className:"firststep_banner--button",children:(0,s.jsx)("input",(t={className:"singlebtn",type:"submit"},(0,n.Z)(t,"className","button"),(0,n.Z)(t,"onClick",(function(){return(0,m.Iw)()})),(0,n.Z)(t,"value","\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043a\u0438\u0434\u043a\u0443"),t))})})]})}}),(0,s.jsx)(x.Z,{isModalOpen:O,closeModal:function(){S(!1)},code:C,setCode:z,onFirstStep:function(e){t(!0);var s={fio:i.fio,iin:i.iin,phone:(0,m.Kp)(i.phone),email:i.email,password:i.password,type:i.type,code:e,source:void 0!==l().get("utm_source")?l().get("utm_source")+"_1":"nashcompany.kz"};void 0!==l().get("utm_source")&&(s.utm_source=l().get("utm_source"),s.click_id=l().get("click_id")),g().get("".concat("https://crediter.kz/api","/stepOne"),{params:s}).then((function(e){console.log(e),t(!1),e.data.success&&(l().set("token",e.data.token,{expires:1e3}),l().set("lead_id",e.data.id,{expires:1e3}),l().set("step",2,{expires:1}),r.default.push("/dlya-fizicheskix-lic?step=2")),e.data.success||(h(e.data.message),a(e.data.message,{appearance:"error",autoDismiss:!0}))}))},error:f,getIdentification:function(){t(!0),S(!1),z(""),h(""),g().get("".concat("https://crediter.kz/api","/identification"),{params:{fio:i.fio,phone:(0,m.Kp)(i.phone),email:i.email,password:i.password,type:i.type,source:"nashcompany.kz",iin:i.iin}}).then((function(e){console.log(e),t(!1),e.data.success&&S(!0),e.data.success||a(e.data.message,{appearance:"error",autoDismiss:!0})})).catch((function(e){t(!1),e.response&&a(e.response.status,{appearance:"error",autoDismiss:!0})}))}})," "]})})},S=function(e){var t=e.setLoading;return(0,s.jsx)(j.VW,{children:(0,s.jsx)(O,{setLoading:t})})},E=[{value:"1",name:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"},{value:"2",name:"\u0423\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044c"},{value:"3",name:"\u0423\u043f\u043e\u043b\u043d\u043e\u043c\u043e\u0447\u0435\u043d\u043d\u043e\u0435 \u043b\u0438\u0446\u043e"},{value:"4",name:"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043f\u043e \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438"},{value:"5",name:"\u042e\u0440\u0438\u0441\u0442"}];function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=function(e){var t=e.setLoading,a=(0,j.e1)().addToast,o=(0,p.useState)({email:"",phone:"",fio:"",password:"",type:"\u042e\u0440 \u043b\u0438\u0446\u043e",position:"1"}),i=o[0],c=o[1],u=(0,p.useState)({email:"",phone:"",fio:"",password:""}),d=(u[0],u[1],(0,p.useState)("")),f=d[0],h=d[1],_=(0,p.useState)(""),O=_[0],S=_[1],C=(0,p.useState)({value:"",type:!1,loading:!1}),U=C[0],D=C[1],L=(0,p.useState)(!1),I=L[0],Z=L[1];(0,p.useEffect)((function(){var e=O?O.replace(/ /g,""):"";12===e.length?(D(z(z({},U),{},{type:!0,value:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",loading:!0})),g().get("https://api.money-men.kz/api/testKompra?bin=".concat(e),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){0===e.data.content.length?setTimeout((function(){D({value:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0411\u0418\u041d",type:!1,loading:!1})}),1e3):D({value:e.data.content[0].name,type:!0,loading:!1})})).catch((function(e){console.log(e),e.response,D({value:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0411\u0418\u041d",type:!1,loading:!1})}))):D({value:"",type:!1,loading:!1})}),[O]);var T=(0,p.useState)(""),P=T[0],A=T[1],K=function(e){(0,y.p)(e.iin)||k()("Oops!","\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0443\u0441\u043b\u0443\u0433\u0430 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438\u0446\u0430\u043c \u0434\u043e\u0441\u0442\u0438\u0433\u0448\u0438\u0435 18 \u043b\u0435\u0442.","info"),!1===U.type&&12!==O.length&&D({value:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0411\u0418\u041d",type:!1}),!0===U.type&&U.value&&(console.log(e),t(!0),c(e),g().get("".concat("https://crediter.kz/api","/identification"),{params:{fio:e.fio,phone:(0,m.Kp)(e.phone),email:e.email,password:e.password,type:e.type,iin:O,source:"nashcompany.kz"}}).then((function(e){t(!1),e.data.success&&Z(!0),e.data.success||a(e.data.message,{appearance:"error",autoDismiss:!0})})).catch((function(e){t(!1),e.response&&a(e.response.status,{appearance:"error",autoDismiss:!0})})))};return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"form_register",children:[(0,s.jsx)(v.J9,{initialValues:{email:"",position:"1",phone:"",fio:"",password:"",type:"\u042e\u0440 \u043b\u0438\u0446\u043e",iin:""},onSubmit:function(e){K(e)},children:function(e){var t,a=e.errors,o=e.touched;return(0,s.jsxs)(v.l0,{children:[(0,s.jsx)(v.gN,{name:"iin",className:"form-control",placeholder:"\u0411\u0418\u041d",type:"tel",component:b.Z,onChange:function(e){return function(e){var t=e.target.value;t&&t.replace(/ /g,""),S(e.target.value)}(e)},value:O}),(0,s.jsx)(v.gN,{type:"text",disabled:!0,className:!1===U.type&&U.value&&"disabled_error text-danger",value:U.value,name:"companyName",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"})," ",(0,s.jsx)(v.gN,{as:"select",type:"text",name:"position",validate:N.C1,placeholder:"\u0417\u0430\u043d\u0438\u043c\u0430\u0435\u043c\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",autocomplete:"off",children:E.map((function(e){return(0,s.jsx)("option",{value:e.value,children:e.name})}))}),a.position&&o.position?(0,s.jsx)("p",{className:"text-danger",children:a.position}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{type:"text",name:"fio",validate:N.X4,placeholder:"\u0424\u0418\u041e",className:"capitalize",autocomplete:"off"})," ",a.fio&&o.fio?(0,s.jsx)("p",{className:"text-danger",children:a.fio}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{name:"phone",className:"form-control",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u043e\u043c\u0435\u0440",type:"tel",validate:N.k8,component:w.Z}),a.phone&&o.phone?(0,s.jsx)("p",{className:"text-danger",children:a.phone}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{type:"text",name:"email",validate:N.s$,placeholder:"Email",autocomplete:"off"})," ",a.email&&o.email?(0,s.jsx)("p",{className:"text-danger",children:a.email}):(0,s.jsx)("p",{className:""}),(0,s.jsx)(v.gN,{type:"password",name:"password",validate:N.l1,placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",autocomplete:"off"})," ",a.password&&o.password?(0,s.jsx)("p",{className:"text-danger",children:a.password}):(0,s.jsx)("p",{className:""}),(0,s.jsxs)("span",{className:"form_extrabtns",children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? ",(0,s.jsx)("a",{onClick:function(){r.default.push("/login")},children:"\u0412\u043e\u0438\u0434\u0438\u0442\u0435"})]}),(0,s.jsx)("div",{className:"firststep_banner",children:(0,s.jsx)("div",{className:"firststep_banner--button",children:(0,s.jsx)("input",(t={className:"singlebtn",type:"submit"},(0,n.Z)(t,"className","button"),(0,n.Z)(t,"onClick",(function(){return(0,m.Iw)()})),(0,n.Z)(t,"value","\u0425\u043e\u0447\u0443 \u0441\u043a\u0438\u0434\u043a\u0438"),t))})})]})}}),(0,s.jsx)(x.Z,{isModalOpen:I,closeModal:function(){Z(!1)},code:P,setCode:A,onFirstStep:function(e){t(!0);var s={fio:i.fio,phone:(0,m.Kp)(i.phone),email:i.email,password:i.password,type:i.type,code:e,iin:O,companyName:U.value,source:l().get("utm_source")+"_1"||0};void 0!==l().get("utm_source")&&(s.utm_source=l().get("utm_source"),s.click_id=l().get("click_id")),g().get("".concat("https://crediter.kz/api","/stepOne"),{params:s}).then((function(e){t(!1),e.data.success&&(l().set("token",e.data.token),l().set("lead_id",e.data.id),l().set("stepjur",2),r.default.push("/jurservice?step=2")),e.data.success||(h(e.data.message),a(finalErr,{appearance:"error",autoDismiss:!0}))}))},error:f,getIdentification:K})]})})},D=function(e){var t=e.setLoading;return(0,s.jsx)(j.VW,{children:(0,s.jsx)(U,{setLoading:t})})};var L=(0,f.$j)((function(e){var t=e.userReducer;return{authenticatingUser:t.authenticatingUser,failedLogin:t.failedLogin,loggedIn:t.loggedIn}}),{loginUser:d.loginUser,fetchCurrentUser:d.fetchCurrentUser})((function(e){var t=e.authenticatingUser,a=(e.failedLogin,e.loggedIn),n=(e.loginUser,(0,p.useState)({iin:"",password:""})),c=(n[0],n[1],(0,p.useState)("")),d=c[0],f=(c[1],(0,p.useState)("jur")),h=f[0],g=f[1],x=(0,p.useState)(!1),j=(x[0],x[1]);return(0,p.useEffect)((function(){console.log("login"+a),l().get("token")&&a&&r.default.push("/cabinet")}),[a]),(0,p.useEffect)((function(){l().get("token")&&a&&r.default.push("/")}),[]),(0,p.useEffect)((function(){d&&(0,m.Iw)()}),[d]),(0,s.jsxs)("div",{className:"getservice",children:[t&&(0,s.jsx)(u.Z,{}),(0,s.jsx)(i.default,{children:(0,s.jsx)("title",{children:"\u041b\u043e\u0433\u0438\u043d"})}),(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)(o.Z,{}),(0,s.jsx)("div",{className:"bg"})]}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"form_headings"}),(0,s.jsxs)("div",{className:"form_service ",children:[(0,s.jsxs)("div",{className:"register_discount",children:[(0,s.jsx)("h2",{className:"formheader",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0441\u044f \u0438 \u043f\u043e\u043b\u0443\u0447\u0438 \u0441\u043a\u0438\u0434\u043a\u0443"}),(0,s.jsx)("img",{alt:"image",className:"",src:"/img/form/firststep.svg"})]}),(0,s.jsxs)("div",{className:"register_options",children:[(0,s.jsx)("a",{className:"jur"===h&&"active",onClick:function(){return g("jur")},children:"\u042e\u0440. \u043b\u0438\u0446\u043e"}),(0,s.jsx)("a",{className:"fiz"===h&&"active",onClick:function(){return g("fiz")},children:"\u0424\u0438\u0437. \u043b\u0438\u0446\u043e"})]}),"jur"===h&&(0,s.jsx)(D,{setLoading:j}),"fiz"===h&&(0,s.jsx)(S,{setLoading:j})]})]})]})}))},9291:function(e,t,a){"use strict";a.r(t),a.d(t,{authenticatingUser:function(){return c},setCurrentUser:function(){return l},logoutUser:function(){return p},logOutAction:function(){return u},loginUser:function(){return d},fetchCurrentUser:function(){return f}});var s=a(9669),n=a.n(s),o=a(6808),i=a.n(o),r=a(1163),c=function(){return{type:"AUTHENTICATING_USER"}},l=function(e){return{type:"SET_CURRENT_USER",payload:e}},p=function(){return{type:"LOGOUT_USER"}},u=function(){return function(e){e(p()),i().remove("token"),r.default.push("/login")}},d=function(e,t){return function(a){a(c()),n().post("".concat("https://crediter.kz/api","/signIn"),e).then((function(e){console.log(e),e.data.success?(i().set("token",e.data.token,{expires:1e3}),n().post("".concat("https://crediter.kz/api","/getData"),{token:e.data.token}).then((function(e){e.data.success?(a(l(e.data)),r.default.push("/cabinet")):(a({type:"FAILED_LOGIN"}),i().remove("token"),r.default.push("/login"))})).catch((function(e){a({type:"FAILED_LOGIN"}),i().remove("token"),r.default.push("/login")}))):(t(e.data.message),a({type:"FAILED_LOGIN"}))}))}},f=function(){return function(e){e(c()),n().post("".concat("https://crediter.kz/api","/getData"),{token:i().get("token")}).then((function(t){t.data.success?e(l(t.data)):(e(p),i().remove("token"),r.default.push("/login"))})).catch((function(t){e(p),i().remove("token"),r.default.push("/")}))}}},8740:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return a(7798)}])}},function(e){e.O(0,[774,663,597,669,356,57,737,657,611,733,875],(function(){return t=8740,e(e.s=t);var t}));var t=e.O();_N_E=t}]);